{
    "name": "rust_quality_check",
    "description": "Comprehensive Rust code quality pipeline: format, lint with auto-fix, test, and build. Runs each step sequentially with proper delays to avoid Cargo.lock contention. CRITICAL: Always use this tool instead of VS Code tasks for quality checks. This tool runs SYNCHRONOUSLY and provides complete results, unlike tasks which run asynchronously and may not show failures. Use this for pre-commit validation, CI preparation, or whenever you need to verify code quality.",
    "command": "sequence",
    "enabled": true,
    "synchronous": true,
    "timeout_seconds": 1200,
    "hints": {
        "default": "IMPORTANT: This is the PREFERRED tool for Rust quality checks. It runs synchronously (waits for completion) and returns complete results including any test failures. DO NOT use VS Code tasks for quality checks as they run asynchronously and may report success before tests complete. This tool performs: 1) cargo fmt, 2) cargo clippy --fix --allow-dirty (including tests), 3) cargo nextest run, 4) cargo build. Review any warnings or errors in the output to improve code quality."
    },
    "sequence": [
        {
            "tool": "cargo",
            "subcommand": "fmt",
            "args": {},
            "description": "Format code with rustfmt"
        },
        {
            "tool": "cargo",
            "subcommand": "clippy",
            "args": {
                "fix": true,
                "allow-dirty": true
            },
            "description": "Lint and auto-fix with clippy"
        },
        {
            "tool": "cargo",
            "subcommand": "clippy",
            "args": {
                "fix": true,
                "allow-dirty": true,
                "tests": true
            },
            "description": "Lint and auto-fix clippy on tests"
        },
        {
            "tool": "cargo",
            "subcommand": "test",
            "args": {},
            "description": "Run all tests"
        },
        {
            "tool": "cargo",
            "subcommand": "build",
            "args": {},
            "description": "Build the project"
        }
    ],
    "step_delay_ms": 100,
    "subcommand": [
        {
            "name": "run",
            "description": "Execute the complete Rust quality check sequence",
            "options": [
                {
                    "name": "working_directory",
                    "type": "string",
                    "description": "Working directory for all operations",
                    "format": "path",
                    "required": false
                }
            ]
        }
    ]
}