{
    "name": "rust_quality_check",
    "description": "Comprehensive Rust code quality pipeline: format, lint with auto-fix, test, and build. Runs each step sequentially with proper delays to avoid Cargo.lock contention. CRITICAL: Always use this tool instead of VS Code tasks for quality checks. This tool runs SYNCHRONOUSLY and provides complete results, unlike tasks which run asynchronously and may not show failures. Use this for pre-commit validation, CI preparation, or whenever you need to verify code quality.",
    "command": "sequence",
    "enabled": true,
    "timeout_seconds": 1800,
    "asynchronous": false,
    "sequence": [
        {
            "tool": "cargo",
            "subcommand": "run",
            "description": "Generate the MTDF schema to ensure it's up-to-date.",
            "args": {
                "bin": "generate_tool_schema"
            }
        },
        {
            "tool": "cargo",
            "subcommand": "run",
            "description": "Validate all tool configurations against the latest schema.",
            "args": {
                "bin": "ahma_validate"
            }
        },
        {
            "tool": "cargo",
            "subcommand": "fmt",
            "description": "Format code using rustfmt.",
            "args": {
                "all": true
            }
        },
        {
            "tool": "cargo",
            "subcommand": "clippy",
            "description": "Lint code and automatically fix issues.",
            "args": {
                "fix": true,
                "allow-dirty": true,
                "workspace": true
            }
        },
        {
            "tool": "cargo",
            "subcommand": "clippy",
            "description": "Lint tests and automatically fix issues.",
            "args": {
                "fix": true,
                "tests": true,
                "allow-dirty": true,
                "workspace": true
            }
        },
        {
            "tool": "cargo",
            "subcommand": "nextest_run",
            "description": "Run the test suite using nextest.",
            "args": {
                "workspace": true
            }
        },
        {
            "tool": "cargo",
            "subcommand": "build",
            "description": "Compile the entire workspace.",
            "args": {
                "workspace": true
            }
        }
    ],
    "step_delay_ms": 500
}